## 네트워크

### 1. 주소매핑
인터넷은 하나의 네트워크 처럼 보이지만 사실 여러 네트워크들이 인터네트워킹 되어있다. 이말은 우리가 목적지로 어떠한 IP패킷을 보내게 되면 수많은 네트워크를 통과하여 최종 목적지로 간다고 할 수 있다. 최종 목적지의 IP주소로 갈 때 수많은 네트워크를 거치는 만큼 수많은 네트워크 장비들을 거쳐서 가게되는데 여기서 이 장비들을 어떻게 지정하는가가 바로 **주소매핑**이다. 

_**매번 네트워크를 통과할 때 마다 IP주소와 MAC주소와의 매핑이 필요하게 된다.**_

\* MAC 주소(Media Access Control Address): 네트워크 세그먼트의 데이터 링크 계층에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자

#### 1) 매핑 방법
**(1) 정적매핑(Static Mapping)**: IP주소와 MAC주소를 연결시키는 테이블을 고정적으로 생성하는 방법으로 수작업으로 직접 입력가능(IP 주소 얘는 MAC주소 뭐야!하고 직접적으로 알려주는거, 시간이 지나도 변하지 않기때문에 Static)

>**문제점**
- 컴퓨터의 랜카드(NIC:Network Interface Card)를 바꿔낄 경우 MAC주소가 바뀌게 됨, 여기서 고정적으로 정적매핑을 하게되면(= IP Address에 대한 Ethernet Address를 설정해놓으면) Ethernet Address 변경시 대응할 수 없음
- 이동이 가능한 컴퓨터(ex. 노트북)는 하나의 네트워크에서 다른 네트워크로 이동할 수 있음
**=> 위와 같은 이유로 정적매핑은 거의 사용하지않음**

**(2) 동적매핑(Dynamic Mapping)**: 컴퓨터가 매번 IP주소와 MAC주소의 관계를 `ARP(Address Resolution Protocol) 프로토콜`을 이용하여 구하는 방법(상대방의 MAC주소를 모를때 ARP프로토콜에게 상대방 IP주소 줄테니 MAC주소 찾아달라함 = **상대방의 IP주소 바뀔때마다 새로 찾기 가능!**)

> **동적매핑의 방법**
IP주소의 해당하는 MAC주소는 뭐냐고 랜에 있는 모든 컴퓨터에게 `Broadcast`함! 그럼 해당없는 컴퓨터들은 무시하고 해당하는 컴퓨터만 Unitcast(Broadcast 반대)로 reply하게 됨(대답을 Broadcast로 할필요 없으니!)

#### 2) RARP, BOOTP, DHCP
_RARP -> BOOTP -> DHCP 순서로 대체_

**(1) RARP(Reverse Address Resolution Protocol)**: MAC주소에 대응하는 IP주소 찾기**(현재는 RARP 대신에 DHCO 사용)**

**(2) BOOTP(The Bootstrap Protocol)**: RARP를 확장하여 주소에 대한 해결뿐만 아니라 부팅관련 정보(부팅이미지, 주소 사용시간결정 등)도 전달할 수 있음

**(3) DHCP(Dynamic Host Configuration Protocol)**: BOOTP와 같은 정적할당 뿐 아니라 동적할당이 모두 가능, IP주소 풀(Pool)에서 주소할당이 가능

### 2. 에러보고
IP 프로토콜은 `에러제어와 관리기능이 부족하다`는 단점을 가지고 있는데 이 두가지를 보완하여 에러보고와 질의응답 메시지 기능을 제공하는 프로토콜이 ICMP(Internet Control Message Protocol)이다. 

>_ 여기서 ICMP는 에러 보고만 할뿐 수정하지는 않는다!(단순보고만!)_

#### 1) 에러보고 기능
**(1) Destination Unreachable(목적지 도달 불가)**: 라우터나 컴퓨터가 IP패킷을 전달할 수 없을 때, 해당 패킷은 폐기되며 라우터나 컴퓨터는 목적지 도달불가 메시지를 송신지로 보내는 것

**(2) Source quench(송신자 조절)**: 라우터나 컴퓨터가 트래픽이 수용할 수 없을 만큼 많은 것처럼 혼잡이 발생하여 들어오는 IP패킷을 폐기하는 경우, 여기서 내가 너꺼 IP패킷 버렸어! 하고 알려주는 것

**(3) Time exceeded(시간초과)**: 라우터는 TTL 필드 값이 0인 패킷은 폐기시키게 되는데 이때 송신지로 시간초과 메시지 전송하거나 
단편화로 쪼개서 보낸 메시지가 모두 도착하지 않고 한개 혹은 몇개가 도착하지 않아 패킷을 조합할 수 없을 때 시간초과 메시지 전송

**(4) Parameter problems(파라미터 문제)**: 라우터나 목적지 컴퓨터가 IP패킷 헤더의 정보 중에서 처리할 수 없는 부분을 발견하게 되면 메시지 전송 

**(5) Redirection(경로 재설정)**: 컴퓨터에서 잘못된 라우터로 패킷을 전달하는 경우 라우터는 올바른 라우터로 전달되도록 라우팅 테이블을 변경할 것을 요구 할 수 있음(이쪽이 아니라 이쪽으로 보내~ 메시지 전송)

#### 2) 질의응답 기능
**(1) Echo request and reply(에코 요청 및 응답)**: `핑` 명령어 쓰면 이 기능 쓰는거임, 에코 요청을 보내면 받은 시스템은 반드시 응답 메시지를 보내야함

**(2) Timestamp request and reply(시간찍기)**: 응답시간을 구하는데 사용

**(3) Address-mask request and reply**: 주소 마스크 정보 요청하면 응답 보내줘야함

**(4) Router solicitation and advertisement**: 라우팅 정보를 보내 줄 라우터를 찾기위해 라우터 요청 메시지를 보냄

\* 내용출처: 쉽게배우는 네트워크 강의(한국직업방송)
