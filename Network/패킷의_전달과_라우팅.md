## 네트워크

### 1. 패킷의 처리
인터넷은 여러 네트워크의 연결로 구성되어있기 때문에 송신지에서 목적지까지 도달할 수 있는 경로가 여러개 있을 수 있다. 
여기서 어느 하나의 올바른 경로를 선택하는 것이 `라우팅(경로설정)`이며 이는 **네트워크 계층의 핵심적인 기능**이다.

#### 1) 패킷의 발송
이러한 IP패킷이 네트워크가 통과 시킬 수 있는 최대 바이트보다 클 경우에는 `단편화(Fragmentation)`시켜 보내게 되는데 그 단편화 정보도 IP패킷의 헤더에 저장하여 보내게 된다. 

#### 2) 최종 목적지
단편화된 패킷을 받은 목적지에서는 다면, 단편들을 모아서 **하나의 온전한 패킷을 조립한다.** 여기서 만약 하나의 온전한 패킷으로 조립이 불가능 하다면 모두 폐기시키고 이를 송신지에게 `CMP(Internet Control Message Protocol)메세지`를 보내게 된다. 

### 2. 패킷의 전달
#### 1) 직접전달(Direct delivery)
패킷의 송신지와 목적지가 동일한 네트워크에 연결되어 있을 때 직접전달하는 경우.

#### 2) 간접전달(Indirect delivery)
패킷이 최종 목적지에 전달될 때까지 라우터에서 라우터로 전달되는 경우.

### 3. 라우팅 테이블
우리가 어떤 웹사이트에 접속을 한다고 했을 때 송신측의 네트워크 계층에서는 데이터 앞쪽에 정보를 담은 헤더(header)를 붙이게 된다. 
**여기서 네트워크 계층에 데이터가 어디로 가야할지 경로를 설정할 수 있도록 `표 형태`로 구성되어 있는 것**을 `라우팅 테이블` 이라고 한다.
즉, 목적지로 갈때 최적의 경로가 표로 구성되어 있는 것을 라우팅 테이블이라고 하고 이를 참조하여 IP패킷을 보내게 되어있다. 
이러한 라우팅 테이블은 처음 송신지에서 보낼때만 참조하는 것이 아니라 네트워크를 통해 이동하다가 **중간 장치들인 스위치나 라우터에서도 라우팅 테이블을 참조**하여 패킷을 보낸다. 

> _라우팅 테이블이 잘 못 만들어진다면 최종 목적지로 갈 수 없음!! 하지만 잘 만들어지면 효율적으로 패킷을 전송할 수 있다._

#### 1) 라우팅 프로토콜: 라우팅 테이블을 만들어 주는 것이 바로 `라우팅 프로토콜`이다. 라우팅 프로토콜에서 라우팅 정보를 주고 받음으로써 이를 판단해 라우팅 테이블을 만들게 된다. 

#### 2) 패킷의 전달 방법
- **이웃노드명시(Next-hop method)**
라우팅 테이블은 전체 경로상의 라우터를 명시하지 않고 `다음 라우터`만 명시한다. 
![](https://images.velog.io/images/anjaekk/post/960183aa-5e0c-48f8-b75f-3971f5913e39/image.png)
\* A -> R1 -> R2 -> B 와 같이 전체 경로를 명시하는 것이 아니라 A는 R1만 명시!_(과도한 메모리사용으로 비효율적이기 때문!)_

- **네트워크 주소 명시(Network specific method)**
IP주소는 크게 `네트워크ID`와 `호스트ID`로 구성되어 있는데 여기서 네트워크ID를 기반으로 호스트ID를 할당하기 때문에 만약 특정 기관이라면 그 안에 있는 모든 컴퓨터들은 네트워크ID가 모두 동일하게 된다. 이렇듯 목적지로 IP패킷을 전달할때 동일한 네트워크에 연결된 컴퓨터들을 하나하나 모두 명시하는 것이 아니라 **목적지 네트워크 주소만 명시하여 보내는 것**을 네트워크 주소 명시라고 한다. 이처럼 간단하게 표기하게 되면 테이블 사이즈가 줄어들게 되고 이 효과로 빠른 검색과 메모리 효율성을 높일 수 있다. 
> 호스트 주소 명시(Host-specific method)
`특별한 목적`이 있는 경우라면 라우팅 테이블에 목적지 컴퓨터 주소를 직접 명시할수 있다! -> 관리자가 직접 입력해야함 (ex. 보안목적 등..)

- **디폴트 지정(Default method)**
인터넷에 있는 모든 목적지를 지정할 수 없음으로 지정된 목적지 이외의 모든 지역을 지정하는 라우팅 엔트리를 `디폴트(Default)`라고 한다.(내가 지정한거 외에는 다 얘한테 보냇!) 
> _보통 네트워크 주소가 0.0.0.0으로 표기 됨!_

#### 3) 라우팅 테이블의 구성
**(1) 정적(Static routing)**: 테이블을 `직접 입력`하는 것으로 시간이 지난다해도 변하지 않는다.
> 네트워크에 붙어있는 마지막 컴퓨터들이 보통 Static routing을 하는 경우가 많음!

**(2) 동적(Dynamic routing)**: `라우팅 프로토콜(RIP, OSPF, BGP와 같은..)`에 의해 정보를 파악하여 경로를 설정하는 것으로 시간이 지남에 따라 최적경로가 변경될 수 있다. 

#### 4) 라우팅 프로토콜의 종류
**(1) 유니캐스트 라우팅 프로토콜** = 보통의 그냥 라우팅 프로토콜
- `일대일 통신`을 말함
- 디지털 서명(Digital Signature)
목적지가 하나이며 라우팅 정보를 교환하여 라우팅 테이블을 구축하는 형태

**(2) 멀티캐스트 라우팅 프로토콜**
- 송신지는 하나, 수신지는 여러개인 시스템으로 목적지가 동일한 그룹에 속한 여러 호스트가 될 수 있다. 

\* 내용출처: 쉽게배우는 네트워크 강의(한국직업방송)
