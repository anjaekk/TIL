# 3장

### 19. 함수가 여러값을 반환하는 경우 절대로 네 값 이상을 언패킹 하지 말라

- 함수에서 반환 값이 많아지면 가독성에도 좋지 않고 휴먼에러 가능성도 높아지기 때문에 return 값이 4개가 넘어간다면 튜플에 넣어서 반환하고 호출하는 쪽에서는 언패킹하는 방법을 고려해 볼 수 있다.
- 혹은 경량 클래스로 해당 함수를 변경하던가 namedtuple 인스턴스를 반환하면 된다.

### 20. None을 반환하기보다는 예외를 발생시켜라

### 21. 변수 영역과 클로저의 상호작용 방식을 이해하라

- 클로저 함수는 자신이 정의된 영역 외부에서 정의된 변수도 참조 가능
    
    ```python
    def sort_priority(values, group):
    	def helper(x):
    		if x in group:
    			return (0, x)
    		return (1, x)
    	values.sort(key=helper)
    ```
    
    위 함수가 작동하는 이유는 아래 3가지와 같다.
    
    - 파이썬의 클로져(closure)
    - 파이썬에서 함수가 일급 시민(first-class citizen) 객체임
        - 일급시민 객체란
            - 직접 가르킬 수 있음
            - 변수에 대입하거나 다른 함수에 인자로 전달 가능
            - 식이나 if문에서 함수를 비교할 수 있음
            - 함수에서 반환하는 것이 가능
    - 파이썬에서는 시퀀스(튜플포함)를 비교하는 구체적인 규칙이 있음
        - 파이썬에서 시퀀스를 비교할 때 0번부터 1번 인덱스까지 순차적으로 값을 비교한다.
- 기본적으로 클로저 내부에서 사용한 대입문은 클로저를 감싸는 영역에 영향을 끼칠 수 없다
- 클로저가 자신을 감싸는 영역의 변수를 변경한다는 사실을 표현할 때는 nonlocal 문을 사용하면 되지만 정말 간단한 함수가 아니고서는 사용을 지양한다.
    - 스코핑 버그(scoping bug)를 해결하기위해 사용하는 nonlocal과 global의 차이점
        - nonlocal 문은 대입할 데이터가 클로저 밖에 있어서 다른 영역에 속한다는 사실을 분명히 알려준다.
        - global이 모듈 전역(전역 영역)을 사용해야한다는 것을 보완해줌
    - 하지만 함수의 동작을 파익하기 힘들어지기 때문에 간단한 함수 외에는 nonlocal을 사용하지 않을 것을 권고

### 22. 변수 위치 인자를 사용해 시각적인 잡음을 줄여라

- 함수 선언시 가변인자(*args)를 사용하게되면 두가지 문제점이 존재
    - 위치인자가 함수에 전달되기 전에 항상 튜플로 변환이 된다.
        - *를 붙인다는 것은 제너레이터의 모든 원소를 얻기위해 반복한다는 뜻이다보니 해당 값이 많아지면 메모리를 많이 소비하거나 심하면 프로그램이 중단될 수 있다.
    - 함수에 새로운 위치인자를 추가하면 해당함수를 호출하는 모든 코드를 변경해야한다.
        - 변경을 안해주면 예외가 발생하지 않고 코드가 잘못된 인자로 동작하여 예상치 못한 버그를 생성할 수 있다.
- 위치인자를 사용할 때는 키워드 기반의 인자만 사용하도록 한다.

### 23. 키워드 인자로 선택적인 기능을 제공하라

- 키워드 인자가 제공하는 이점
    - 코드를 처음 보는 사람에게 함수 호출의 의미를 명확히 알려줄 수 있다.(number=20 과 같이 함수명과 더불어 부가적인 설명이 될 수 있음)
    - 키워드 인자의 경우

### 24. None과 독스트링을 사용해 동적인 디폴트 인자를 지정하라

- 다음과 같이 동적인 값을 받는 함수가 있을 때, 10초 전과 후의 값이 동일하게 된다.
    
    ```jsx
    from datetime import datetime
    import time
    
    def log(when=datetime.now()):
    	print(f"log를 남기겠습니다. {when}")
    
    log() # 10초 전
    time.sleep(10)
    log() # 10초 후
    ```
    
- 디폴트 인자가 있는 경우 디폴트 값을 계산하는 코드가 들어있는 모듈이 로드된 다음 다시 평가가 이루어 지지 않기 때문이다.
- 이럴 경우 디폴트 인자를 None으로 하고 코드 내에서 datetime을 로드하도록 하면 된다.

### 25. 위치로만 인자를 지정하게 하거나 키워드로만 인자를 지정하게 해서 함수 호출을 명확하게 만들라

```python
def safe_division_e(numerator, denominator, /,
										nidigits=10, *,
										ignore_overflow=False,
										ignore_zero_division=False):
```

- 위치로만 지정해야 하는 인자는 / 앞에 위치하고 키워드를 사용하는 인자는 / 뒤에 위치하도록 한다.
- 반드시 키워드를 사용해 호출을 강제하고 싶으면 * 뒤에 인자를 넣으면 된다.
- / 와 * 사이에 있는 인자는 키워드를 사용해도 되고 위치를 기반으로 전달해도 된다.

### 26. functools.wrap을 사용해 함수 데코레이터를 정의하라
