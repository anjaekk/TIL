## 좋은 객체지향

- 가장 중요한 핵심 개념은 다형성
- 역할과 구현을 분리해야한다.
    - 역할 = 인터페이스
    - 구현 = 인터페이스를 구현한 클래스, 구현 객체
- 자바 언어의 다형성
    - 오버라이딩
- 스프링은 다형성을 극대화해서 이용할 수 있도록 도와준다. (제어의 역전(IoC), 의존관계 주입(DI)

## SOLID

### SRP 단일 책임 원칙

- 한 클래스는 하나의 책임만 가져야 한다.
- 하나의 책임이라는 건 모호한데 해당 책임이 클수도, 작을수도 있기 때문이다.
- 중요한 기준은 “변경” 이다. 변경이 있을 때 파급 효과가 적으면 단일 책임 원칙을 잘 따른 것이라고 볼 수 있다.

### OCP 개방-패쇄 원칙

- 소프트웨어 요소는 확장에는 열려있으나 변경에는 닫혀있어야 한다.
- 다형성을 활용
- 하지만 다형성을 활용한다고 해도 클라이언트의 코드를 변경해야 하는 부분이 생긴다.
    - 메모리 멤버 리포지토리가 아닌 jdbc 멤버 리포지토리로 변경시 아래와 같은 코드 변경이 생김
    
    ```java
    MemberRepository m = new MemoryMemberRepository(); // 기존코드 
    MemberRepository m = new JdbcMemberRepository(); // 변경코드
    ```
    
- 해결 방법: 객체를 생성하고 연관과계를 맺어주는 별도의 조립, 설정자가 필요해진다. → 스프링 컨테이너 이용

### LSP 리스코프 치환 원칙

- 프로그램의 객체는 프로그램의 정확성을 깨뜨리지 않으면서 하위 타입의 인스턴스로 바꿀 수 있어야 한다.
- 상위 클래스의 기본 원칙을 하위 클래스들이 지켜야 한다는 것이다.
- 단순 컴파일에 성공과 실패를 얘기하지 않고 규약을 지켜야 한다는 내용

### ISP 인터페이스 분리 원칙

- 특정 클라이언트를 위한 인터페이스 여러 개가 범용 인터페이스 하나보다 낫다.

### DIP 의존관계 역전 원칙

- 프로그래머는 “추상화에 의존해야지 구체화에 의존하면 안된다” 의존성 주입은 이 원칙을 따르는 방법 중 하나
- 역할과 구현을 철저하게 분리하여 역할에 의존하고 구현에 의존 하지 않도록 해야함
- 구현 클래스에 의존하지 말고 인터페이스에 의존해야 한다는 뜻
- 아래 코드는 클라이언트가 구현 클래스를 직접 선택하고 있기 때문에 DIP를 위반하고 있다.
    
    ```java
    MemberRepository m = new MemoryMemberRepository(); // 기존코드 
    MemberRepository m = new JdbcMemberRepository(); // 변경코드
    ```
    

---

## 실무 고민

- 인터페이스를 도입하면 추상화라는 비용이 발생
- 기능을 확장할 가능성이 없다면 구체 클래스를 직접 사용하고, 향후 꼭 필요할때 리팩터링해서 인터페이스를 도입하는 것도 방법이다.

---

## 관심사의 분리

구현체는 구현에만 집중해야한다. (구현체가 다른 구현체를 직접 선택하지 않도록 해야한다.)

### DI(의존관계 주입)

- DIP 충족
- 구현 객체를 생성하고 연결하는 책임을 가지는 별도의 설정 클래스
- 해당 DI클래스는 애플리케이션 실제 동작에 필요한 구현 객체를 생성한다.
- 생성한 객체 인스턴스의 참조(레퍼런스)를 생성자를 통해 주입(연결)해준다.
